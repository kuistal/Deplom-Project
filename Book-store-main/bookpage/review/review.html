<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Review</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="../home.css" />
    <link rel="stylesheet" href="review.css" />
    <link rel="icon" type="image/png" href="../../assets/image/vHu9xligIEg-Photoroom.png">
  </head>
  <body>
    <nav>
      <div class="left-nav">
        <!-- <ul>
                <li><a href="home.html">HOME</a></li>
                <li><a href="../bookpage/index.html">BOOKS</a></li>
                <li><a href="../contactpage/contact.html">CONTACT</a></li>
            </ul> -->

        <a href="../home.html"
          ><img
            src="https://cdn.pixabay.com/photo/2017/01/13/13/11/book-1977235_640.png"
            alt=""
        /></a>
      </div>
      <input type="checkbox" id="menu" />
      <label for="menu" class="ham">
        <span></span>
        <span></span>
        <span></span>
      </label>
      <div class="right-nav">
        <a href="../home.html">HOME</a>
        <a href="index.html">BOOKS</a>
        <a href="../contactpage/contact.html">CONTACT</a>
        <a href="../loginform/loginform/index.html">LOGIN</a>
        <a href="../profile/profile.html" class="profile-btn">
          <i class="bi bi-person-circle"></i>
        </a>
        <!-- Dark mode toggle button -->
        <button id="darkModeToggle" class="dark-mode-btn">
          <i id="darkModeIcon" class="bi bi-brightness-high"></i>
        </button>
      </div>
    </nav>
    <div class="container">
      <div class="book-details">
        <img id="bookImage" src="" alt="Book Image" />
        <h2 id="bookTitle">Book Title</h2>
        <h3 id="bookAuthor">By Author</h3>
      </div>

      <div class="review-section">
        <h2>Reviews & Ratings</h2>
        <div id="reviews"></div>

        <h3>Add a Review</h3>
        <textarea id="reviewText" placeholder="Write your review..."></textarea>
        <div class="rating-container">
          <span onclick="rate(1)" class="star">★</span>
          <span onclick="rate(2)" class="star">★</span>
          <span onclick="rate(3)" class="star">★</span>
          <span onclick="rate(4)" class="star">★</span>
          <span onclick="rate(5)" class="star">★</span>
          <h3 id="output">Rating is: 0/5</h3>
        </div>
        <input type="hidden" id="selectedRating" value="0" />
        <button onclick="addReview()">Submit Review</button>
      </div>
    </div>
    <script src="review.js"></script>
    <script src="../../header.js"></script>
    <script src="../../theme.js"></script>
    <script>
      const darkModeToggle = document.getElementById("darkModeToggle");
      const darkModeIcon = document.getElementById("darkModeIcon");
      const body = document.body;
      const nav = document.querySelector("nav");
      const footer = document.querySelector("footer");
      const navLinks = document.querySelectorAll(".left-nav ul li a");
      const rightNavLinks = document.querySelectorAll(".right-nav a"); // Fix

      // Ensure dark mode persists
      if (localStorage.getItem("darkMode") === "enabled") {
        enableDarkMode();
      }

      darkModeToggle.addEventListener("click", () => {
        if (body.classList.contains("dark")) {
          disableDarkMode();
        } else {
          enableDarkMode();
        }
      });

      function enableDarkMode() {
        body.classList.add("dark");
        nav.classList.add("dark");
        footer?.classList.add("dark"); // Check if footer exists
        darkModeIcon.classList.replace("bi-brightness-high", "bi-moon");
        localStorage.setItem("darkMode", "enabled");

        navLinks.forEach((link) => link.classList.add("dark"));
        rightNavLinks.forEach((link) => link.classList.add("dark"));
      }

      function disableDarkMode() {
        body.classList.remove("dark");
        nav.classList.remove("dark");
        footer?.classList.remove("dark");
        darkModeIcon.classList.replace("bi-moon", "bi-brightness-high");
        localStorage.setItem("darkMode", "disabled");

        navLinks.forEach((link) => link.classList.remove("dark"));
        rightNavLinks.forEach((link) => link.classList.remove("dark"));
      }
    </script>
    <script src="../../footer.js"></script>
  </body>
</html>
